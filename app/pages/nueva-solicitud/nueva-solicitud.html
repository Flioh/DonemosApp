<ion-header>
	<ion-navbar red>
		<ion-title>Nueva Solicitud</ion-title>
		<button menuToggle="right" end>
			<ion-icon name="menu"></ion-icon>
		</button>	
	</ion-navbar>
</ion-header>



<ion-content padding class="nueva-solicitud">
	<ion-list>
		<form (ngSubmit)="guardarCambios()" #nuevaSolicitudForm="ngForm" >



			<!-- Institucion  -->
			<ion-item>
				<ion-label stacked>Institucion</ion-label>
				<ion-input id="autocomplete" [(ngModel)]="nuevaSolicitud.lugar" name="lugar" #lugar="ngModel" required type="text" placeholder="Ejemplo: Hospital Cullen"></ion-input>
			</ion-item>
			<span [hidden]="lugar.valid || lugar.untouched" class="mensaje-error">
				Ingrese el nombre de la institución.
			</span>



			<!-- Dirección  -->
			<ion-item>
				<ion-label floating>Direccion</ion-label>
				<ion-input [(ngModel)]="nuevaSolicitud.direccion" name="direccion" #direccion="ngModel" required type="text"></ion-input>
			</ion-item>
			<span [hidden]="direccion.valid || direccion.untouched" class="mensaje-error">
				Ingrese la dirección.
			</span>



			<!-- Provincia  -->
			<ion-item>
				<ion-label floating>Provincia</ion-label>
				<ion-select [(ngModel)]="nuevaSolicitud.provinciaID"  okText="Aceptar" cancelText="Cancelar" required name="provincia" #provincia="ngModel" (ionChange)="inicializarCiudadesDeLaProvincia()">
					<ion-option *ngFor="let provincia of listaProvincias" value={{provincia.id}}>
						{{provincia.nombre}}
					</ion-option>
				</ion-select>
			</ion-item>
			<span [hidden]="provincia.valid || provincia.untouched" class="mensaje-error">
				Seleccione una provincia.
			</span>



			<!-- Ciudad  -->
			<ion-item>
				<ion-label floating>Ciudad</ion-label>
				<ion-select [(ngModel)]="nuevaSolicitud.localidadID" okText="Aceptar" cancelText="Cancelar" required name="ciudad" #ciudad="ngModel">
					<ion-option *ngFor="let ciudad of listaCiudades" value={{ciudad.id}}>
						{{ciudad.nombre}}
					</ion-option>
				</ion-select>
			</ion-item>
			<span [hidden]="ciudad.valid || ciudad.untouched" class="mensaje-error">
				Seleccione una ciudad.
			</span>



			<!-- Hora desde -->
			<ion-item [class.ng-touched]="horaDesde.touched">
				<ion-label>Desde las</ion-label>
				<ion-datetime displayFormat="HH:mm" [(ngModel)]="nuevaSolicitud.horaDesde" required name="horaDesde" #horaDesde="ngModel" minuteValues="0,15,30,45" doneText="Aceptar" cancelText="Cancelar">
				</ion-datetime>
			</ion-item>
			<span [hidden]="horaDesde.valid || horaDesde.untouched" class="mensaje-error">
				Ingrese la hora de inicio.
			</span>



			<!-- Hora hasta -->
			<ion-item [class.ng-touched]="horaHasta.touched">
				<ion-label>Hasta las</ion-label>
				<ion-datetime displayFormat="HH:mm" [(ngModel)]="nuevaSolicitud.horaHasta" required name="horaHasta" #horaHasta="ngModel" minuteValues="0,15,30,45" doneText="Aceptar" cancelText="Cancelar">
				</ion-datetime>
			</ion-item>
			<span [hidden]="horaHasta.valid || horaHasta.untouched" class="mensaje-error">
				Ingrese la hora de fin.
			</span>



			<!-- Grupo sanguineo  -->
			<ion-item class="half-size">
				<ion-label floating>Grupo</ion-label>
				<ion-select [(ngModel)]="nuevaSolicitud.grupoSanguineoID" okText="Aceptar" cancelText="Cancelar" required name="grupo" #grupo="ngModel">
					<ion-option *ngFor="let grupo of listaGruposSanguineos" value={{grupo.id}}>
						{{grupo.nombre}}
					</ion-option>
				</ion-select>
			</ion-item>



			<!-- Factor sanguineo  -->
			<ion-item class="half-size">
				<ion-label floating>Factor</ion-label>
				<ion-select [(ngModel)]="nuevaSolicitud.factorSanguineoID" okText="Aceptar" cancelText="Cancelar" required name="factor" #factor="ngModel">
					<ion-option *ngFor="let factor of listaFactoresSanguineos" value={{factor.id}}>
						{{factor.nombre}}
					</ion-option>
				</ion-select>
			</ion-item>



			<!-- Cantidad  -->
			<ion-item>
				<ion-label floating>Cantidad</ion-label>
				<ion-input [(ngModel)]="nuevaSolicitud.cantidad" name="cantidad" type="number"></ion-input>
			</ion-item>



			<!-- Datos adicionales  -->
			<ion-item>
				<ion-label floating>Datos adicionales</ion-label>
				<ion-textarea rows="6" [(ngModel)]="nuevaSolicitud.datosAdicionales" name="datosAdicionales"></ion-textarea>
			</ion-item>



			<ion-item>
				<h3>Value:</h3>
				<pre>{{contenidoDelFormulario}}</pre>
				<pre>Validity: {{nuevaSolicitudForm.form.valid}}</pre>
			</ion-item>



			<button [disabled]="!nuevaSolicitudForm.form.valid" class="submit" red block>Crear Solicitud</button>



		</form>

	</ion-list>

</ion-content>


