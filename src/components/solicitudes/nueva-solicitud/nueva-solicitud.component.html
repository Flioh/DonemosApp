<ion-header no-shadow>
	<ion-navbar color="rojo">
		<ion-title>Nueva Solicitud</ion-title>
	</ion-navbar>
</ion-header>



<ion-content padding class="nueva-solicitud">
	<ion-item-group>
		<form (ngSubmit)="guardarCambios()" #nuevaSolicitudForm="ngForm" >


			<!-- Institucion  -->
			<ion-item>
				<ion-label stacked>Nombre de institución</ion-label>
				<ion-input institucionesAutocomplete [(ngModel)]="nuevaSolicitud.institucion" (seleccionarInstitucion)="setearDireccion($event)" name="institucion" #institucion="ngModel" required type="text" placeholder="Ejemplo: Hospital Cullen"></ion-input>
			</ion-item>
			<span [hidden]="institucion.valid || institucion.untouched" class="mensaje-error">
				Ingrese el nombre de la institución.
			</span>



			<!-- Dirección  -->
			<ion-item>
				<ion-label stacked>Direccion</ion-label>
				<ion-input [(ngModel)]="nuevaSolicitud.direccion" name="direccion" #direccion="ngModel" required type="text" placeholder="Ejemplo: San Martín 2345"></ion-input>
			</ion-item>
			<span [hidden]="direccion.valid || direccion.untouched" class="mensaje-error">
				Ingrese la dirección.
			</span>



			<!-- Provincia  -->
			<ion-item>
				<ion-label stacked>Provincia</ion-label>
				<ion-select [(ngModel)]="nuevaSolicitud.provincia"  okText="Aceptar" cancelText="Cancelar" required name="provincia" #provincia="ngModel" (ionChange)="inicializarCiudadesDeLaProvincia()">
					<ion-option *ngFor="let provincia of listaProvincias" [value]="provincia">
						{{provincia.nombre}}
					</ion-option>
				</ion-select>
			</ion-item>
			<span [hidden]="provincia.valid || provincia.untouched" class="mensaje-error">
				Seleccione una provincia.
			</span>



			<!-- Ciudad  -->
			<ion-item>
				<ion-label stacked>Ciudad</ion-label>
				<ion-select [(ngModel)]="nuevaSolicitud.ciudad" okText="Aceptar" cancelText="Cancelar" required name="ciudad" #ciudad="ngModel">
					<ion-option *ngFor="let ciudad of listaCiudades" [value]="ciudad">
						{{ciudad.nombre}}
					</ion-option>
				</ion-select>
			</ion-item>
			<span [hidden]="ciudad.valid || ciudad.untouched" class="mensaje-error">
				Seleccione una ciudad.
			</span>



			<!-- Hora desde -->
			<ion-item [class.ng-touched]="horaDesde.touched">
				<ion-label>Desde las</ion-label>
				<ion-datetime displayFormat="HH:mm" [(ngModel)]="nuevaSolicitud.horaDesde" required name="horaDesde" #horaDesde="ngModel" minuteValues="0,15,30,45" doneText="Aceptar" cancelText="Cancelar">
				</ion-datetime>
			</ion-item>
			<span [hidden]="horaDesde.valid || horaDesde.untouched" class="mensaje-error">
				Ingrese la hora de inicio.
			</span>



			<!-- Hora hasta -->
			<ion-item [class.ng-touched]="horaHasta.touched">
				<ion-label>Hasta las</ion-label>
				<ion-datetime displayFormat="HH:mm" [(ngModel)]="nuevaSolicitud.horaHasta" required name="horaHasta" #horaHasta="ngModel" minuteValues="0,15,30,45" doneText="Aceptar" cancelText="Cancelar">
				</ion-datetime>
			</ion-item>
			<span [hidden]="horaHasta.valid || horaHasta.untouched" class="mensaje-error">
				Ingrese la hora de fin.
			</span>



			<!-- Nombre del paciente  -->
			<ion-item>
				<ion-label stacked>Nombre del paciente</ion-label>
				<ion-input [(ngModel)]="nuevaSolicitud.nombrePaciente" name="nombrePaciente" #nombrePaciente="ngModel" required type="text" placeholder="Ejemplo: Juan Perez"></ion-input>
			</ion-item>
			<span [hidden]="nombrePaciente.valid || nombrePaciente.untouched" class="mensaje-error">
				Ingrese la el nombre del paciente.
			</span>



			<!-- Grupo sanguineo  -->
			<ion-item>
				<ion-label stacked>Grupo sanguineo</ion-label>
				<ion-select [(ngModel)]="nuevaSolicitud.grupoSanguineo" okText="Aceptar" cancelText="Cancelar" required name="grupo" #grupo="ngModel">
					<ion-option *ngFor="let grupo of listaGruposSanguineos" [value]="grupo">
						{{grupo.nombre}}
					</ion-option>
				</ion-select>
			</ion-item>



			<!-- Factor sanguineo  -->
			<ion-item>
				<ion-label stacked>Factor sanguineo</ion-label>
				<ion-select [(ngModel)]="nuevaSolicitud.factorSanguineo" okText="Aceptar" cancelText="Cancelar" required name="factor" #factor="ngModel">
					<ion-option *ngFor="let factor of listaFactoresSanguineos" [value]="factor">
						{{factor.nombre}}
					</ion-option>
				</ion-select>
			</ion-item>



			<!-- Cantidad  -->
			<ion-item>
				<ion-label stacked>Cantidad</ion-label>
				<ion-input [(ngModel)]="nuevaSolicitud.cantidadDadores" name="cantidad" type="number" placeholder="Ejemplo: 5"></ion-input>
			</ion-item>



			<!-- Datos adicionales  -->
			<ion-item>
				<ion-label stacked>Datos adicionales</ion-label>
				<ion-textarea rows="6" [(ngModel)]="nuevaSolicitud.datosAdicionales" name="datosAdicionales" placeholder="Ejemplo: Se necesitan dadores para mi papá/mamá/... El horario que figura es de Lunes a Viernes, los sábados también se puede donar pero sólo por la mañana..."></ion-textarea>
			</ion-item>




			<button ion-button [disabled]="!nuevaSolicitudForm.form.valid" type="submit" color="rojo" full>Crear Solicitud</button>



		</form>

	</ion-item-group>

</ion-content>


